{
  "types": [
    { "id":300, "name":"ElasticsearchClient", "color":"lightslategray" }
  ],
  "nodes": [
    {
      "name": "Elasticsearch Client",
      "type": 4,
      "version": 1,
      "import": ["com.lionsoft.elasticsearch.ElasticsearchClient", "org.elasticsearch.rest.RestStatus", "java.util.*"],
      "classpath": ["{path}/ElasticsearchClient.jar"],
      "java":"out{1} = new ElasticsearchClient((in{1} == 0 ? \"http\" : \"https\"), in{2}, in{3}, in{4}, in{5}, in{6}, in{7});",
      "input": [
        { "type": "Exec", "label": "" },
        { "type": "Integer", "label": "Protocol", "value": 0, "enum": [ "HTTP", "HTTPS" ] },
        { "type": "String", "label": "Hostname", "value": "localhost" },
        { "type": "Integer", "label": "Port", "value": 9200 },
        { "type": "String", "label": "Username", "value": "" },
        { "type": "String", "label": "Password", "value": "", "password":true },
        { "type": "Boolean", "label": "Check certificate", "value": false },
        { "type": "String", "label": "Certificate", "value": "", "single_line":true },
      ],
      "output": [
        { "type": "Exec", "label": "" },
        { "type": "ElasticsearchClient", "label": "Client", "java": { "references":{"variable":"client"} } }
      ]
    },
    {
      "name": "Elasticsearch Close Client",
      "type": 4,
      "version": 1,
      "import": ["com.lionsoft.elasticsearch.ElasticsearchClient", "org.elasticsearch.rest.RestStatus", "java.util.*"],
      "classpath": ["{path}/ElasticsearchClient.jar"],
      "java":"in{1}.close();",
      "input": [
        { "type": "Exec", "label": "" },
        { "type": "ElasticsearchClient", "label": "Client" }
      ],
      "output": [
        { "type": "Exec", "label": "" }
      ]
    },
    {
      "name": "Elasticsearch Ping",
      "type": 4,
      "version": 1,
      "import": ["com.lionsoft.elasticsearch.ElasticsearchClient", "org.elasticsearch.rest.RestStatus", "java.util.*"],
      "classpath": ["{path}/ElasticsearchClient.jar"],
      "java":"if (in{1}.ping()) { exec{0} } else { exec{1} }",
      "input": [
        { "type": "Exec", "label": "" },
        { "type": "ElasticsearchClient", "label": "Client" }
      ],
      "output": [
        { "type": "Exec", "label": "Success" },
        { "type": "Exec", "label": "Failure" }
      ]
    },
    {
      "name": "Elasticsearch Empty Index",
      "type": 4,
      "version": 1,
      "import": ["com.lionsoft.elasticsearch.ElasticsearchClient", "org.elasticsearch.rest.RestStatus", "java.util.*"],
      "classpath": ["{path}/ElasticsearchClient.jar"],
      "java":"out{2} = in{1}.emptyIndex(in{2});",
      "input": [
        { "type": "Exec", "label": "" },
        { "type": "ElasticsearchClient", "label": "Client" },
        { "type": "String", "label": "Index", "value": "", "single_line":true }
      ],
      "output": [
        { "type": "Exec", "label": "Success" },
        { "type": "ElasticsearchClient", "label": "Client", "java": { "references":{"input":1 } } },
        { "type": "Integer", "label": "Deleted", "java": { "references":{"variable":"deleted"} } }
      ]
    },
    {
      "name": "Elasticsearch Put Document",
      "type": 4,
      "version": 1,
      "import": ["com.lionsoft.elasticsearch.ElasticsearchClient", "org.elasticsearch.rest.RestStatus", "java.util.*", "org.json.simple.*"],
      "classpath": ["{path}/ElasticsearchClient.jar"],
      "jar": ["lib/json-simple-1.1.1.jar"],
      "java":"if (in{1}.putDocumentJSON(in{2}, in{3}, in{4})) { exec{0} } else { out{2} = in{1}.getMessage(); exec{1} }",
      "input": [
        { "type": "Exec", "label": "" },
        { "type": "ElasticsearchClient", "label": "Client" },
        { "type": "String", "label": "Index", "value":"", "single_line":true },
        { "type": "String", "label": "_id", "value":"", "single_line":true },
        { "type": "JSONObject", "label": "Document" }
      ],
      "output": [
        { "type": "Exec", "label": "Success" },
        { "type": "Exec", "label": "Error" },
        { "type": "String", "label": "Message", "java": { "references":{"variable":"msg"} } }
      ]
    },
    {
      "name": "Elasticsearch Bulk Insert",
      "type": 4,
      "version": 1,
      "import": ["com.lionsoft.elasticsearch.ElasticsearchClient",
                 "org.elasticsearch.action.bulk.BulkResponse",
                 "org.elasticsearch.action.bulk.BulkItemResponse",
                 "org.elasticsearch.action.DocWriteResponse",
                 "org.elasticsearch.action.index.IndexResponse",
                 "org.elasticsearch.rest.RestStatus", 
                 "java.util.*", 
                 "org.json.simple.*"],
      "classpath": ["{path}/ElasticsearchClient.jar"],
      "jar": ["lib/json-simple-1.1.1.jar"],
      "java":"@BulkInsert.java",
      "input": [
        { "type": "Exec", "label": "" },
        { "type": "ElasticsearchClient", "label": "Client" },
        { "type": "String", "label": "Index", "value":"", "single_line":true },
        { "type": "JSONArray", "label": "Data" }
      ],
      "output": [
        { "type": "Exec", "label": "Success" },
        { "type": "Integer", "label": "Created", "java": { "references":{"variable":"created"} } },
        { "type": "Integer", "label": "Updated", "java": { "references":{"variable":"updated"} } },
        { "type": "Integer", "label": "Errors", "java": { "references":{"variable":"errors"} } },
        { "type": "Boolean", "label": "Has failures", "java": { "references":{"variable":"hasFailures"} } },
        { "type": "Exec", "label": "Error" },
        { "type": "String", "label": "Message", "java": { "references":{"variable":"msg"} } }
      ]
    }
  ]
}
